(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{297:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return j})),n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return b})),n.d(t,"e",(function(){return f}));var i=n(8),c=n(13),r=n(308),o=n(26),a=n(147),d=n(43),l=n(81),s=n(21);function u(){var e,t=Object(s.c)(),n=Object(c.a)(t,1)[0].user,r=Object(a.a)({queryKey:["like-items",null===n||void 0===n?void 0:n._id],queryFn:function(){return o.c.get("/".concat(null===n||void 0===n?void 0:n._id,"/likes")).then((function(e){return e.data.data.likes})).catch((function(e){throw e.response.data}))}});return Object(i.a)(Object(i.a)({},r),{},{likeItems:null!==(e=r.data)&&void 0!==e?e:[]})}function j(e){var t,n=Object(s.c)();return Object(c.a)(n,1)[0].user&&null!==(t=u().likeItems.find((function(t){return t.videoId===e})))&&void 0!==t?t:null}function b(e){var t=Object(s.c)(),n=Object(c.a)(t,1)[0].user,r=Object(d.b)(),a=Object(l.a)((function(e){return o.c.post("/".concat(null===n||void 0===n?void 0:n._id,"/likes"),{videoId:e.videoId,title:e.title,channelTitle:e.channel.title,image:e.images,publishedAt:e.publishedAt})}),{onSettled:function(){r.invalidateQueries(["like-items",null===n||void 0===n?void 0:n._id]),r.invalidateQueries(["videoInfo",{videoId:e}])},onError:function(e,t,n){"function"===typeof n&&n()},onMutate:function(){var t=r.getQueryData(["videoInfo",{videoId:e}]);return r.setQueryData(["videoInfo",{videoId:e}],(function(e){return Object(i.a)(Object(i.a)({},e),{},{likes:e.likes+1})})),function(){return r.setQueryData(["videoInfo",{videoId:e}],t)}}});return Object(i.a)(Object(i.a)({},a),{},{createLike:a.mutateAsync})}function v(){var e=Object(s.c)(),t=Object(c.a)(e,1)[0].user,n=Object(d.b)(),a=Object(l.a)((function(e){var n=e.videoId;return o.c.delete("/".concat(null===t||void 0===t?void 0:t._id,"/likes/").concat(n))}),{onSettled:function(){n.invalidateQueries(["like-items",null===t||void 0===t?void 0:t._id])},onError:function(e,t,n){"function"===typeof n&&n()},onMutate:function(e){var i=e.videoId,c=n.getQueryData(["like-items",null===t||void 0===t?void 0:t._id]);return n.setQueryData(["like-items",null===t||void 0===t?void 0:t._id],(function(e){return r.a((function(e){return e.videoId===i}),e)})),function(){return n.setQueryData(["like-items",null===t||void 0===t?void 0:t._id],c)}}});return Object(i.a)(Object(i.a)({},a),{},{removeLike:a.mutateAsync})}function f(e){var t=Object(s.c)(),n=Object(c.a)(t,1)[0].user,r=Object(d.b)(),a=Object(l.a)((function(e){var t=e.videoId;return o.c.delete("/".concat(null===n||void 0===n?void 0:n._id,"/likes/").concat(t))}),{onSettled:function(){r.invalidateQueries(["like-items",null===n||void 0===n?void 0:n._id]),r.invalidateQueries(["videoInfo",{videoId:e}])},onError:function(e,t,n){"function"===typeof n&&n()},onMutate:function(){var t=r.getQueryData(["videoInfo",{videoId:e}]);return r.setQueryData(["videoInfo",{videoId:e}],(function(e){if(e)return Object(i.a)(Object(i.a)({},e),{},{likes:e.likes-1})})),function(){return r.setQueryData(["videoInfo",{videoId:e}],t)}}});return Object(i.a)(Object(i.a)({},a),{},{removeLike:a.mutateAsync})}},331:function(e,t,n){"use strict";n.r(t);var i=n(3),c=n(0),r=n(6),o=n(36),a=n(297),d=n(18),l=n(20),s=n(4),u=n(1),j=n(325),b=n(326),v=n(13),f=n(323),O=n(329),h=n(324),m=n(263),p=Object(c.createContext)(),k=Object(f.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),x=function(e){var t=e.children,n=Object(c.useState)(!1),r=Object(v.a)(n,2),o={isOpen:r[0],setIsOpen:r[1]};return Object(i.jsx)(p.Provider,{value:o,children:t})},I=function(e){var t=e.children,n=Object(c.useContext)(p).setIsOpen;return Object(c.cloneElement)(t,{onClick:_((function(){return n(!0)}),t.props.onClick)})},y=function(e){var t=e.children,n=Object(c.useContext)(p).setIsOpen;return Object(c.cloneElement)(t,{onClick:_((function(){return n(!1)}),t.props.onClick)})},g=function(e){var t=e.children,n=Object(c.useContext)(p),r=n.isOpen,o=n.setIsOpen,a=k();return Object(i.jsx)(O.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.modal,open:r,onClose:function(){return o(!1)},closeAfterTransition:!0,BackdropComponent:h.a,BackdropProps:{timeout:500},children:Object(i.jsx)(m.a,{in:r,children:Object(i.jsx)("div",{className:a.paper,children:t})})})};function _(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.forEach((function(e){e&&e.apply(void 0,n)}))}}function w(){var e=Object(d.a)(["\n   position: relative;\n   background: var(--color-grey-light-2);\n   transition: background 0.25s;\n   &:hover {\n      background: var(--color-grey-light-3);\n   }\n\n   .like {\n      &__window {\n         text-align: center;\n      }\n\n      &__windowtitle {\n         font-size: 1.7rem !important;\n      }\n\n      &__portalbtn {\n         position: absolute;\n         top: 0.5rem;\n         right: 0.5rem;\n      }\n      &__deletebtn {\n         color: ",";\n      }\n   }\n"]);return w=function(){return e},e}var Q=Object(s.c)((function(e){var t=e.like,n=e.className,c=Object(a.d)().removeLike;return Object(i.jsxs)(r.n.Item,{className:n,children:[Object(i.jsxs)(x,{children:[Object(i.jsx)(I,{children:Object(i.jsx)(r.a,{modifiers:"transparent",className:"like__portalbtn",children:Object(i.jsx)(r.h,{as:j.a})})}),Object(i.jsx)(g,{children:Object(i.jsxs)(r.e,{direction:"column",y:"center",children:[Object(i.jsx)(r.t,{children:"Are you sure you want to remove this item?"}),Object(i.jsx)(y,{children:Object(i.jsxs)(r.a,{modifiers:"outline",className:"like__deletebtn",onClick:function(){return c({videoId:t.videoId})},children:[Object(i.jsx)(r.h,{as:b.a}),Object(i.jsx)(r.s,{children:"Remove"})]})})]})})]}),Object(i.jsx)(r.m,{as:l.b,to:"/watch/".concat(t.videoId),children:Object(i.jsxs)(r.o,{flexy:"center",children:[Object(i.jsx)(r.o.Item,{width:"20",children:Object(i.jsx)(r.j,{children:Object(i.jsx)(r.i,{src:t.image,alt:t.title})})}),Object(i.jsxs)(r.o.Item,{width:"75",mg:{x:"1%"},children:[Object(i.jsx)(r.t,{as:"h2",modifiers:"small",children:t.title}),Object(i.jsx)(r.t,{as:"h3",modifiers:["small","light"],children:t.channelTitle})]})]})})]})}))(w(),u.a.dark2);t.default=function(e){var t,n=e.className,c=Object(a.c)(),d=c.likeItems,l=c.isIdle,s=c.isLoading,u=c.isSuccess;return l||s?Object(i.jsx)(r.c,{width:"10",children:Object(i.jsx)(o.a,{})}):u?Object(i.jsx)(r.c,{width:"10",className:n,children:Object(i.jsx)(r.b,{width:{desktop:"60",tabland:"70",tabport:"90"},my:"2",children:Object(i.jsx)("nav",{children:Object(i.jsx)(r.n,{children:(t=d,null===t||void 0===t?void 0:t.map((function(e){return Object(i.jsx)(Q,{like:e},e._id)})))})})})}):void 0}}}]);
//# sourceMappingURL=6.db81333a.chunk.js.map